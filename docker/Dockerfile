FROM golang:alpine
MAINTAINER Maksym Stepanenko <stepanenkomaksi@gmail.com>

########################################################################################################################
# Alpine
########################################################################################################################
RUN apk update && apk upgrade && apk add git bash

########################################################################################################################
# dependencies
########################################################################################################################
RUN go get github.com/gorilla/mux

########################################################################################################################
# user-service
########################################################################################################################
ADD user-service /go/src/github.com/go-land/user-service
WORKDIR /go/src/github.com/go-land/user-service
RUN go build -o /go/bin/user-service .

########################################################################################################################
# run script
########################################################################################################################
#ADD user-service/docker/run.sh run.sh
#ADD user-service/docker/loop.sh loop.sh
#RUN chmod +x run.sh loop.sh

ENTRYPOINT ["/go/bin/user-service"]

#CMD ./run.sh
#CMD ./loop.sh